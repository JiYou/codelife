<!doctype html>
<!-- The Time Machine GitHub pages theme was designed and developed by Jon Rohan, on Feb 7, 2012. -->
<!-- Follow him for fun. http://twitter.com/jonrohan. Tail his code on http://github.com/jonrohan -->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <!-- change dir -->
  <link rel="stylesheet" href="../../../stylesheets/stylesheet.css" media="screen">
  <link rel="stylesheet" href="../../../stylesheets/pygment_trac.css">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="../../../javascripts/script.js"></script>
  <!-- change dir -->

  <title>Codelife</title>
  <meta name="description" content="技术人生">

  <meta name="viewport" content="width=device-width,initial-scale=1">

</head>

<body>

  <div class="wrapper">
    <header>
      <h1 class="title">OpenStack Deploy</h1>
    </header>
    <div id="container">
      <p class="tagline">
		<!-- TAG 1 -->
		<a href="http://jiyou.github.io/codelife/openstack-deploy/appendix/chap2"> 上一章</a>
		<a href="http://jiyou.github.io/codelife/openstack-deploy/appendix/chap4"> 下一章 </a>
		<!-- TAG 1 -->
	  </p>
      <div id="main" role="main">
        <div class="download-bar">
        	<span class="blc"></span><span class="trc"></span>
        </div>
        <article class="markdown-body">
		<p>作者: Ji You Email: jumail@qq.com</p>
			<h1>

				<a name="codelife" class="anchor" href="#codelife">
				<span class="octicon octicon-link"></span></a>
			</h1>


<!-- 正文 ------------------------>
<h1>Offline Repo</h1>
<p>在实际应用中，经常会使用rpm包安装系统。由于网络的原因，经常会导致下载时间特别长。因此，制作离线源变得非常迫切。在本文中，将会介绍如何制作用于CentOS 6.5的离线源。</p>
<p>此处制作的离线源主要用于安装OpenStack Icehouse版本使用，其他版本仅供参考。</p>
<h1>重要提示</h1>
<p>如果是复制本页代码，会在每行代码的前面形成多余的空格。去除方法如下：</p>
<pre><code>sed -i &quot;s,^    ,,g&quot; file_path
</code></pre>

<p>建议至(https://github.com/JiYou/openstack-deploy/tree/master/appendix/offline-repo) 中寻找本文相关脚本。</p>
<h1>方案1</h1>
<h2>基本思路</h2>
<p>在利用yum安装各种包时，会在本地形成缓存，安装完成之后，利用这些缓存文件，便可成功地制作离线源。</p>
<h2>Step 1 保留缓存</h2>
<p>方案1所采用的方法较为简单，只需要将yum.conf中的keepcache设置为1：</p>
<pre><code>keepcache=1
</code></pre>

<p>此项一定需要修改，否则默认yum会将安装之后的缓存目录清空。完成之后，添加RDO源：</p>
<pre><code>yum install -y https://rdo.fedorapeople.org/rdo-release.rpm
</code></pre>

<h2>Step 2 安装包</h2>
<p>首先建立安装包索引：</p>
<pre><code>yum makecache
</code></pre>

<p>安装各种相关包，如果要安装OpenStack，那么需要安装如下包：</p>
<pre><code>yum install -y memcached mod_wsgi mongodb \
    mongodb-server mysql MySQL-python \
    mariadb-galera-server \
    openstack-ceilometer-alarm \
    openstack-ceilometer-api \
    openstack-ceilometer-central \
    openstack-ceilometer-collector \
    openstack-ceilometer-compute \
    openstack-ceilometer-notification \
    openstack-cinder openstack-dashboard \
    openstack-glance openstack-heat-api \
    openstack-heat-api-cfn \
    openstack-heat-engine openstack-keystone \
    openstack-neutron openstack-neutron-ml2 \
    openstack-neutron-openvswitch \
    opentack-nova openstack-nova-api \
    openstack-nova-cert openstack-nova-compute \
    openstack-nova-conductor openstack-nova-console \
    openstack-nova-network openstack-nova-novncproxy \
    openstack-nova-scheduler openstack-selinux \
    openstack-swift-account openstack-swift-container \
    openstack-swift-object openstack-swift-proxy \
    openstack-trove openstack-utils \
    python-ceilometerclient python-glanceclient \
    python-keystoneclient python-memcached \
    python-neutronclient python-novaclient \
    python-pecan python-pip python-swiftclient \
    python-troveclient qpid-cpp-server \
    scsi-target-utils xfsprogs xinetd rabbitmq-server
</code></pre>

<p><strong>注意</strong>安装时，请务必确保所有的这些包都能正常安装成功。如果缺少包，请至网络上查找相应的rpm，并设置相应的源。</p>
<h2>Step 3 复制缓存文件</h2>
<p>安装完成之后：</p>
<pre><code>yum install -y createrepo
cd /var/cache/yum
mkdir -p /tmp/openstack-repo
find . -name &quot;*.rpm&quot; | xargs -i cp -rf {} /tmp/openstack-repo
cd /tmp/openstack-repo
createrepo .
</code></pre>

<p>如果看到如下输出：</p>
<pre><code>Saving Primary metadata
Saving file lists metadata
Saving other metadata
Generating sqlite DBs
Sqlite DBs complete
</code></pre>

<p>则说明离线源已经制作成功。</p>
<h2>Step 4使用离线源</h2>
<p>将做好离线源的/tmp/openstack-repo保存好，使用时，将此目录存放至目标节点的/opt/目录下，在/etc/yum.repos.d目录下添加文件openstack-repo.repo:</p>
<pre><code>[openstack-repo]
name=openstack-repo
baseurl=file:///opt/openstack-repo/
gpgcheck=0
enabled=1
proxy=_none_
</code></pre>

<p><strong>注意</strong>openstack-repo.repo文件开始并没有空格或者Tab。</p>
<p>接下来，就可以使用做好的离线源了。</p>
<pre><code>sed -i 's,^    ,,g' /etc/yum.repos.d/openstack-repo.repo
yum makecache
yum install openstack-nova-compute
</code></pre>

<h2>优缺点</h2>
<p>这种方法优点如下：</p>
<pre><code>- 只需要下载需要的包及其依赖包。
- 制作的离线源通常比较小。
</code></pre>

<p>但也存在着如下缺点：</p>
<pre><code>- 由于网络原因，yum下载时间，有时会特别长。
- 当缺少某个包时，依然比较麻烦。
- 添加包时，需要重新制作离线源。
</code></pre>

<h2>补充</h2>
<p>如果在使用方案一时，出现某些包无法下载时，请添加online-icehouse.repo至/etc/yum.repos.d目录：</p>
<pre><code>[theforeman-plugin-source]
name=theforeman-plugins
baseurl=http://yum.theforeman.org/plugins/1.5/el6/source
gpgcheck=0
enabled=1

[theforman-plugins-x86_64]
name=theforman-plugins-x86_64
baseurl=http://yum.theforeman.org/plugins/1.5/el6/x86_64
gpgcheck=0
enabled=1

[theforeman-release-source]
name=theforeman-release-source
baseurl=http://yum.theforeman.org/releases/1.5/el6/source
gpgcheck=0
enabled=1

[theforeman-release-x86_64]
name=theforeman-release-x86_64
baseurl=http://yum.theforeman.org/releases/1.5/el6/x86_64
gpgcheck=0
enabled=1

[puppetlabs-products-x86_64]
name=puppetlabs-products-x86_64
baseurl=http://yum.puppetlabs.com/el/6/products/x86_64
gpgcheck=0
enabled=1

[puppetlabs-dependencies]
name=puppetlabs-dependencies
baseurl=http://yum.puppetlabs.com/el/6/dependencies/x86_64
gpgcheck=0
enabled=1

[puppetlabs-devel]
name=puppetlabs-devel
baseurl=http://yum.puppetlabs.com/el/6/devel/x86_64
gpgcheck=0
enabled=1

[puppetlabs-products-srpms]
name=puppetlabs-products-srpms
baseurl=http://yum.puppetlabs.com/el/6/products/SRPMS
gpgcheck=0
enabled=1

[puppetlabs-dependencies-srpms]
name=puppetlabs-dependencies-srpms
baseurl=http://yum.puppetlabs.com/el/6/dependencies/SRPMS
gpgcheck=0
enabled=1

[puppetlabs-devel-srpms]
name=puppetlabs-devel-srpms
baseurl=http://yum.puppetlabs.com/el/6/devel/SRPMS
gpgcheck=0
enabled=1

[openstack-icehouse]
name=openstack-icehouse
baseurl=http://repos.fedorapeople.org/repos/openstack/openstack-icehouse/epel-6/
gpgcheck=0
enabled=1

[ceph]
name=ceph
baseurl=http://ceph.com/rpm/el6/x86_64/
gpgcheck=0
enabled=1

[ceph-extras]
name=ceph-extras
baseurl=http://ceph.com/packages/ceph-extras/rpm/centos6/x86_64/
gpgcheck=0
enabled=1

[epel]
name=epel
baseurl=http://mirror.steadfast.net/epel/6/x86_64/
gpgcheck=0
enabled=0

[rpmfind]
name=rpmfind
baseurl=http://rpmfind.net/linux/centos/6.5/os/x86_64/Packages/
gpgcheck=0
enabled=1

[nac-net]
name=nac-net
baseurl=http://centos.mirror.nac.net/6.5/os/x86_64/Packages/
gpgcheck=0
enabled=1

[cs.vt]
name=cs-vt
baseurl=http://mirror.cs.vt.edu/pub/CentOS/6.5/updates/x86_64/Packages/
gpgcheck=0
enabled=1

[download-fedoraproject]
name=download-fedoraporject
baseurl=http://download.fedoraproject.org/pub/epel/6/x86_64
gpgcheck=0
enabled=1

[repos-fedorapeople]
name=repos-fedorapeople
baseurl=http://repos.fedorapeople.org/repos/openstack/openstack-icehouse/epel-6/epel/
gpgcheck=0
enabled=1
</code></pre>

<p>然后，运行命令如下：</p>
<pre><code>sed -i 's,^    ,,g' /etc/yum.repos.d/icehouse.repo
yum makecache
</code></pre>

<p><strong>注意</strong></p>
<pre><code>sed -i 's,^    ,,g' /etc/yum.repos.d/icehouse.repo
用于去掉行首的空格，如果不去掉，yum不能识别repo文件。
</code></pre>

<h1>方案2</h1>
<h2>思路</h2>
<p>与方案1相比，方案2显得更加简单粗暴，直接将所有可能用到的源全部下载至本地，然后存放至http服务器。供所有的节点使用。</p>
<p>下载方法，首先根据链接，下载所有rpm包的列表：</p>
<pre><code>wget http://repos.fedorapeople.org/repos/openstack/openstack-icehouse/epel-6/epel/ -O index.html
</code></pre>

<p>然后，根据index.html，解析出所有的rpm包：</p>
<pre><code>rpm_list=`cat index.html  | \
    grep rpm | \
    awk -F &quot;href&quot; '{print $2}' | \
    awk -F &quot;&gt;&quot; '{print $1}' | \
    awk -F &quot;=&quot; '{print $2}' | \
    sed &quot;s/\&quot;//&quot; | sed &quot;s/\&quot;//&quot;`
echo $rpm_list
</code></pre>

<p>再接着，下载这些rpm包：</p>
<pre><code>for n in $rpm_list; do
    wget -c $n
done
</code></pre>

<p>下载包完成之后，进入到rpm包所在目录，运行：</p>
<pre><code>createrepo .
</code></pre>

<p>便可创建离线源。下面是具体步骤。</p>
<h2>Step 1下载rpm包</h2>
<p>为了保证本文脚本能正确运行，请务必至/media目录下运行。空间消耗大概是30G，请务必保证有足够大的空间以供使用。</p>
<p>下载包脚本download.sh代码如下：</p>
<pre><code>#!/bin/bash
function _get_rpm() {
    cat index.html  | \
        grep rpm | \
        awk -F &quot;href&quot; '{print $2}' | \
        awk -F &quot;&gt;&quot; '{print $1}' | \
        awk -F &quot;=&quot; '{print $2}' | \
        sed &quot;s/\&quot;//&quot; | sed &quot;s/\&quot;//&quot; | \
        grep -v nexuiz-data | \
        grep -v ceph-debuginfo # 这个两种包太大，用不着，跳过
}

urls=&quot;baseurl=http://yum.theforeman.org/plugins/1.5/el6/source
baseurl=http://yum.theforeman.org/plugins/1.5/el6/x86_64
baseurl=http://yum.theforeman.org/releases/1.5/el6/source
baseurl=http://yum.theforeman.org/releases/1.5/el6/x86_64
baseurl=http://yum.puppetlabs.com/el/6/products/x86_64
baseurl=http://yum.puppetlabs.com/el/6/dependencies/x86_64
baseurl=http://yum.puppetlabs.com/el/6/devel/x86_64
baseurl=http://yum.puppetlabs.com/el/6/products/SRPMS
baseurl=http://yum.puppetlabs.com/el/6/dependencies/SRPMS
baseurl=http://yum.puppetlabs.com/el/6/devel/SRPMS
baseurl=http://repos.fedorapeople.org/repos/openstack/openstack-icehouse/epel-6/
baseurl=http://ceph.com/rpm/el6/x86_64/
baseurl=http://ceph.com/packages/ceph-extras/rpm/centos6/x86_64/
baseurl=http://download.fedoraproject.org/pub/epel/6/x86_64
baseurl=http://mirror.steadfast.net/epel/6/x86_64/
baseurl=https://repos.fedorapeople.org/repos/openstack/openstack-icehouse/epel-6/epel/
baseurl=http://rpmfind.net/linux/centos/6.5/os/x86_64/Packages/
baseurl=http://centos.mirror.nac.net/6.5/os/x86_64/Packages/
baseurl=http://mirror.cs.vt.edu/pub/CentOS/6.5/updates/x86_64/Packages/&quot;

for n in $urls; do
    url=`echo $n | awk -F &quot;=&quot; '{print $2}'`
    todir=`echo $url|awk -F&quot;//&quot; '{print $2}'`

    mkdir -p $todir
    old_dir=`pwd`
    cd $todir
    wget $url -O index.html
    for prpm in `_get_rpm `; do
        if [[ ! -e $prpm ]]; then
            nohup wget $url/$prpm &gt;/dev/null 2&gt;&amp;1 &amp;
        fi
    done
    rm -rf index.html
    cd $old_dir
done

while [[ `ps aux| grep wget | wc -l` -gt 1 ]]; do
    sleep 1
    ps aux| grep wget | wc -l
done
</code></pre>

<p>复制此脚本，写入download文件，执行如下命令：</p>
<pre><code>[[ `cat download | head -1 | grep &quot;^#&quot; | wc -l` -eq 0 ]] &amp;&amp; sed -i &quot;s,^    ,,g&quot; download
</code></pre>

<p>成功去掉行首多余的空格之后，运行脚本：</p>
<pre><code>./download
</code></pre>

<p>将会开始下载所有的rpm包。下载成功之后，会在当前目录形成如下结构：</p>
<pre><code>$ ls -l
drwxr-xr-x 3 root root  4096 Oct 24 04:02 cd1
drwxrwxr-x 3 1003 1003  4096 Oct 23 22:50 centos.mirror.nac.net
drwxrwxr-x 4 1003 1003  4096 Oct 23 05:26 ceph.com
rwxrwxr-x 1 1003 1003  1900 Oct 24 03:51 download
drwxrwxr-x 3 1003 1003  4096 Oct 23 12:01 download.fedoraproject.org
drwxrwxr-x 3 1003 1003  4096 Oct 23 23:06 mirror.cs.vt.edu
drwxrwxr-x 3 1003 1003  4096 Oct 23 05:52 mirror.steadfast.net
drwxrwxr-x 3 1003 1003  4096 Oct 23 05:16 repos.fedorapeople.org
drwxrwxr-x 3 1003 1003  4096 Oct 23 12:19 rpmfind.net
drwxrwxr-x 3 1003 1003  4096 Oct 23 05:16 yum.puppetlabs.com
drwxrwxr-x 4 1003 1003  4096 Oct 23 05:16 yum.theforeman.org
</code></pre>

<p><strong>注意</strong>在下载时，会不断地输出数字，比如345，324等等，这表明还有这么多个包还未下载成功，还处在于下载状态。请不要退出程序。</p>
<h2>Step 2 构建离线源</h2>
<p>编写build脚本如下：</p>
<pre><code>#!/bin/bash

old_dir=`pwd`

for n in `cat download | grep baseurl= | awk -F &quot;//&quot; '{print $2}'`; do
    cd $old_dir
    cd $n
    nohup createrepo .
    cd $old_dir
done
echo &quot;build success&quot;
</code></pre>

<p>如果是复制此内容，请运行如下命令，去掉开头多余的空格：</p>
<pre><code>[[ `cat build | head -1 | grep &quot;^#&quot; | wc -l` -eq 0 ]] &amp;&amp; sed -i &quot;s,^    ,,g&quot; build
</code></pre>

<p>然后，执行build命令：</p>
<pre><code>./build &gt;build-log 2&gt;&amp;1 &amp;
</code></pre>

<h3>出错处理</h3>
<p>在build过程中，可以通过:</p>
<pre><code>tail -f build-log
</code></pre>

<p>查看进展，如果看build success，则表明构建成功。但是容易出现如下错误：</p>
<pre><code>Worker 0: error: rpmts_HdrFromFdno: headerRead failed: hdr blob(12128): BAD, read returned 2683
Worker 0: Error: Could not open local rpm file: /media/mirror.cs.vt.edu/pub/CentOS/6.5/updates/x86_64/Packages/./mod_nss-1.0.8-19.el6_5.x86_64.rpm: RPM Error opening Package
Worker 0: error: rpmts_HdrFromFdno: headerRead failed: hdr blob(40712): BAD, read returned 2682
Worker 0: Error: Could not open local rpm file: /media/mirror.cs.vt.edu/pub/CentOS/6.5/updates/x86_64/Packages/./nss-devel-3.16.1-4.el6_5.x86_64.rpm: RPM Error opening Package
</code></pre>

<p>在这种情况下，需要使用re-download脚本下载这些出错的rpm包：</p>
<pre><code>#!/bin/bash

for n in `cat /tmp/build-log  | grep rpm | awk -F &quot;rpm file:&quot; '{print $2}' | awk '{print $1}' | awk -F &quot;:&quot; '{print $1}' | grep rpm | grep -v &quot;^$&quot;`; do
    url=`echo $n | awk -F &quot;media/&quot; '{print $2}'`
    echo $url
    wget -c http://$url -O $n
done
echo &quot;download over&quot;
</code></pre>

<p>如果是复制本脚本，请务必运行如下命令去掉行首多余的空格：</p>
<pre><code>    [[ `cat re-download | head -1 | grep &quot;^#&quot; | wc -l` -eq 0 ]] &amp;&amp; sed -i &quot;s,^    ,,g&quot; re-download
</code></pre>

<p>下载成功之后，请运行re-build脚本：</p>
<pre><code>#!/bin/bash

old_dir=`pwd`

function _get_dir() {
    for n in `cat build-log  | \
          grep rpm | \
          awk -F &quot;rpm file:&quot; '{print $2}' | \
          awk '{print $1}' | \
          awk -F &quot;:&quot; '{print $1}' | \
          grep rpm | grep -v &quot;^$&quot; | \
          sort -u`; do
        echo ${n%%./*}
    done
}

for n in `_get_dir | sort -u`; do
    cd $n
    creatrerepo .
    cd $old_dir
done
echo &quot;re-build success&quot;
</code></pre>

<p>如果是复制本脚本，请运行如下命令去掉行首多余的空格：</p>
<pre><code>    [[ `cat re-build | head -1 | grep &quot;^#&quot; | wc -l` -eq 0 ]] &amp;&amp; sed -i &quot;s,^    ,,g&quot; re-build
</code></pre>

<h2>Step 3 存放至http服务器</h2>
<p>将些离线源做好之后，存放至http服务。Ubuntu可以直接存放于/var/www/目录下，而CentOS需要存放于/var/www/html/目录下，并且CentOS需要开启如下规则：</p>
<pre><code>iptables -A INPUT -p tcp -m tcp --dport 80 -j ACCEPT
chcon -R -h -t httpd_sys_content_t /var/www/html/
chmod -R a+r /var/www/html/
setsebool -P httpd_can_network_connect 1 &amp;
</code></pre>

<p>在本文中，存放于10.239.82.94服务器的：/var/www/html/icehouse目录下，形成目录结构如下，仅供参考：</p>
<p><strong>注意</strong>为了使用方便，本文也将CentOS-6.5-DVD1.iso中的所有的rpm包拷贝至cd1/Packages/目录，构建成离线源以供使用。</p>
<pre><code>icehouse/
├── cd1
│   └── Packages
│       ├── repodata
│       ├── TRANS.TBL
├── centos.mirror.nac.net
│   └── 6.5
│       └── os
│           └── x86_64
│               └── Packages
│                   ├── repodata
├── ceph.com
│   ├── packages
│   │   └── ceph-extras
│   │           └── centos6
│   │               └── x86_64
│   │                   ├── index.html?C
│   │                   ├── repodata
│       └── el6
│           └── x86_64
│               ├── index.html?C
│               ├── repodata
├── download
├── download.fedoraproject.org
│   └── pub
│       └── epel
│           └── 6
│               └── x86_64
│                   ├── repodata
├── error
├── mirror.cs.vt.edu
│   └── pub
│       └── CentOS
│           └── 6.5
│               └── updates
│                   └── x86_64
│                       └── Packages
│                           ├── repodata
├── mirror.steadfast.net
│   └── epel
│       └── 6
│           └── x86_64
│               ├── repodata
├── re-build
├── re-download
├── repos.fedorapeople.org
│   └── repos
│       └── openstack
│           └── openstack-icehouse
│               └── epel-6
│                   ├── epel
│                   │   └── repodata
│                   ├── repodata
│   └── linux
│       └── centos
│           └── 6.5
│               └── os
│                   └── x86_64
│                       └── Packages
│                           ├── repodata
├── yum.puppetlabs.com
│   └── el
│       └── 6
│           ├── dependencies
│           │   ├── SRPMS
│           │   │   ├── repodata
│           │   └── x86_64
│           │       ├── repodata
│           ├── devel
│           │   ├── SRPMS
│           │   │   └── repodata
│           │   └── x86_64
│           │       └── repodata
│           └── products
│               ├── SRPMS
│               │   └── repodata
│               └── x86_64
│                   └── repodata
└── yum.theforeman.org
    ├── plugins
    │   └── 1.5
    │       └── el6
    │           ├── source
    │           │   ├── repodata
    │           └── x86_64
    │               ├── repodata
    └── releases
        └── 1.5
            └── el6
                ├── source
                │   ├── repodata
                └── x86_64
                    ├── repodata
</code></pre>

<p>使用时，添加如下repo文件：</p>
<pre><code>[cd1]
name=cd1
baseurl=http://10.239.82.94/icehouse/cd1/Packages
gpgcheck=0
enabled=1
proxy=_none_


[theforeman-plugin-source]
name=theforeman-plugins
baseurl=http://10.239.82.94/icehouse/yum.theforeman.org/plugins/1.5/el6/source
gpgcheck=0
enabled=1
proxy=_none_

[theforman-plugins-x86_64]
name=theforman-plugins-x86_64
baseurl=http://10.239.82.94/icehouse/yum.theforeman.org/plugins/1.5/el6/x86_64
gpgcheck=0
enabled=1
proxy=_none_

[theforeman-release-source]
name=theforeman-release-source
baseurl=http://10.239.82.94/icehouse/yum.theforeman.org/releases/1.5/el6/source
gpgcheck=0
enabled=1
proxy=_none_

[theforeman-release-x86_64]
name=theforeman-release-x86_64
baseurl=http://10.239.82.94/icehouse/yum.theforeman.org/releases/1.5/el6/x86_64
gpgcheck=0
enabled=1
proxy=_none_

[puppetlabs-products-x86_64]
name=puppetlabs-products-x86_64
baseurl=http://10.239.82.94/icehouse/yum.puppetlabs.com/el/6/products/x86_64
gpgcheck=0
enabled=1
proxy=_none_

[puppetlabs-dependencies]
name=puppetlabs-dependencies
baseurl=http://10.239.82.94/icehouse/yum.puppetlabs.com/el/6/dependencies/x86_64
gpgcheck=0
enabled=1
proxy=_none_

[puppetlabs-devel]
name=puppetlabs-devel
baseurl=http://10.239.82.94/icehouse/yum.puppetlabs.com/el/6/devel/x86_64
gpgcheck=0
enabled=1
proxy=_none_

[puppetlabs-products-srpms]
name=puppetlabs-products-srpms
baseurl=http://10.239.82.94/icehouse/yum.puppetlabs.com/el/6/products/SRPMS
gpgcheck=0
enabled=1
proxy=_none_

[puppetlabs-dependencies-srpms]
name=puppetlabs-dependencies-srpms
baseurl=http://10.239.82.94/icehouse/yum.puppetlabs.com/el/6/dependencies/SRPMS
gpgcheck=0
enabled=1
proxy=_none_

[puppetlabs-devel-srpms]
name=puppetlabs-devel-srpms
baseurl=http://10.239.82.94/icehouse/yum.puppetlabs.com/el/6/devel/SRPMS
gpgcheck=0
enabled=1
proxy=_none_

[openstack-icehouse]
name=openstack-icehouse
baseurl=http://10.239.82.94/icehouse/repos.fedorapeople.org/repos/openstack/openstack-icehouse/epel-6/
gpgcheck=0
enabled=1
proxy=_none_

[ceph]
name=ceph
baseurl=http://10.239.82.94/icehouse/ceph.com/rpm/el6/x86_64/
gpgcheck=0
enabled=1
proxy=_none_

[ceph-extras]
name=ceph-extras
baseurl=http://10.239.82.94/icehouse/ceph.com/packages/ceph-extras/rpm/centos6/x86_64/
gpgcheck=0
enabled=1
proxy=_none_

[epel]
name=epel
baseurl=http://10.239.82.94/icehouse/mirror.steadfast.net/epel/6/x86_64/
gpgcheck=0
enabled=0
proxy=_none_

[rpmfind]
name=rpmfind
baseurl=http://10.239.82.94/icehouse/rpmfind.net/linux/centos/6.5/os/x86_64/Packages/
gpgcheck=0
enabled=1
proxy=_none_


[nac-net]
name=nac-net
baseurl=http://10.239.82.94/icehouse/centos.mirror.nac.net/6.5/os/x86_64/Packages/
gpgcheck=0
enabled=1
proxy=_none_

[cs.vt]
name=cs-vt
baseurl=http://10.239.82.94/icehouse/mirror.cs.vt.edu/pub/CentOS/6.5/updates/x86_64/Packages/
gpgcheck=0
enabled=1
proxy=_none_

[download-fedoraproject]
name=download-fedoraporject
baseurl=http://10.239.82.94/icehouse/download.fedoraproject.org/pub/epel/6/x86_64
gpgcheck=0
enabled=1
proxy=_none_

[repos-fedorapeople]
name=repos-fedorapeople
baseurl=http://10.239.82.94/icehouse/repos.fedorapeople.org/repos/openstack/openstack-icehouse/epel-6/epel/
gpgcheck=0
enabled=1
proxy=_none_
</code></pre>

<p>接下来，只需要yum makecache就可以使用离线源了。</p>

<!-- 正文 -------------------------------->


        </article>
      </div>
    </div>
    <footer>
      <div class="owner">
      <p><a href="https://github.com/JiYou" class="avatar"><img src="https://avatars0.githubusercontent.com/u/448253?v=2&amp;s=60" width="48" height="48"></a> <a href="https://github.com/JiYou">JiYou</a> maintains <a href="https://github.com/JiYou/codelife">Codelife</a></p>


      </div>
      <div class="creds">
        <small>This page generated using <a href="http://pages.github.com/">GitHub Pages</a><br>theme by <a href="https://twitter.com/jonrohan/">Jon Rohan</a></small>
      </div>
    </footer>
  </div>
  <div class="current-section">
    <a href="#top">Scroll to top</a>
    <a href="https://github.com/JiYou/codelife/tarball/master" class="tar">tar</a><a href="https://github.com/JiYou/codelife/zipball/master" class="zip">zip</a><a href="" class="code">source code</a>
    <p class="name"></p>
  </div>

</body>
</html>
